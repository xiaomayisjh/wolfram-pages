# Wolfram|Alpha API 网络服务使用说明

## 🎯 项目概述

基于现有的Wolfram|Alpha Mobile API实现，创建了一个完整的网络服务解决方案，包括：

- **Flask网络服务** - 提供RESTful API接口
- **Python客户端** - 完整的客户端示例
- **Web前端** - 图形化查询界面
- **启动脚本** - 便捷的服务器管理

## 📁 文件结构

```
open-source/
├── wolfram_api_server.py      # Flask网络服务
├── client_example.py          # Python客户端示例
├── web_client.html           # Web前端客户端
├── start_server.py           # 服务器启动脚本
├── requirements.txt          # 依赖包列表
├── API_Server_README.md      # API文档
├── 使用说明.md               # 本文件
└── wolfram_mobile_api.py     # 核心API封装
```

## 🚀 快速开始

### 1. 安装依赖

```bash
cd open-source
pip install -r requirements.txt
```

### 2. 启动服务器

```bash
# 方法1: 使用启动脚本 (推荐)
python start_server.py

# 方法2: 直接启动
python wolfram_api_server.py

# 方法3: 自定义配置
python start_server.py --host 0.0.0.0 --port 8080 --no-debug
```

### 3. 测试服务

访问 `http://localhost:5000` 查看API文档

## 🔧 使用示例

### Python客户端示例

```bash
# 运行完整演示
python client_example.py

# 在代码中使用
from client_example import WolframAPIClient

client = WolframAPIClient()
result = client.quick_query("2+2")
print(result)
```

### Web客户端

在浏览器中打开 `web_client.html`，提供：
- 图形化查询界面
- 多种查询选项
- 实时结果展示
- 快速查询示例

### API调用示例

```python
import requests

# 快速查询
response = requests.get('http://localhost:5000/query/2+2')
print(response.json())

# POST查询
data = {
    "input": "population of France",
    "format": "plaintext",
    "output": "json"
}
response = requests.post('http://localhost:5000/query', json=data)
print(response.json())
```

## 📡 API接口说明

### 基础接口

| 方法 | 路径 | 描述 | 示例 |
|------|------|------|------|
| GET | `/` | API文档 | `GET /` |
| GET | `/health` | 健康检查 | `GET /health` |
| POST | `/query` | 执行查询 | `POST /query` |
| GET | `/query/<text>` | 快速查询 | `GET /query/2+2` |
| GET | `/result/<text>` | 获取结果文本 | `GET /result/population%20of%20France` |
| GET | `/pods/<text>` | 获取所有pods | `GET /pods/H2O` |

### 专用接口

| 方法 | 路径 | 描述 | 示例 |
|------|------|------|------|
| GET | `/math/<text>` | 数学查询 | `GET /math/y%27%20=%20y/(x+y^3)` |
| GET | `/science/<text>` | 科学查询 | `GET /science/H2O` |

## 🎯 查询类型示例

### 数学查询
- `2+2` - 基本算术
- `sqrt(16)` - 平方根
- `y' = y/(x+y^3)` - 微分方程
- `integrate x^2` - 积分

### 科学查询
- `H2O` - 化学分子
- `speed of light` - 物理常数
- `atomic mass of carbon` - 原子质量

### 地理查询
- `population of France` - 人口信息
- `weather in Beijing` - 天气信息
- `area of China` - 面积信息

### 单位转换
- `1 mile to km` - 长度转换
- `100°F to °C` - 温度转换
- `1 gallon to liters` - 体积转换

## ⚙️ 配置选项

### 服务器配置

```python
# 修改端口和主机
app.run(debug=True, host='0.0.0.0', port=8080)

# 修改API基础URL
client = WolframAPIClient(base_url="http://your-server:8080")
```

### 启动参数

```bash
# 查看帮助
python start_server.py --help

# 自定义配置
python start_server.py --host 0.0.0.0 --port 8080 --no-debug

# 只检查依赖
python start_server.py --check-deps
```

## 🔍 功能特性

### 网络服务特性
- ✅ RESTful API接口
- ✅ 多种查询方式
- ✅ 错误处理
- ✅ CORS支持
- ✅ 健康检查
- ✅ API文档

### 客户端特性
- ✅ Python客户端封装
- ✅ Web图形界面
- ✅ 快速查询示例
- ✅ 错误处理
- ✅ 结果格式化
- ✅ 数学公式渲染

### 核心API特性
- ✅ Mobile API集成
- ✅ 无需AppID注册
- ✅ 签名验证
- ✅ 多种输出格式
- ✅ 完整功能支持

## 🛠️ 开发指南

### 添加新接口

```python
@app.route('/custom/<query_text>')
def custom_query(query_text):
    try:
        result = wolfram_api.query_json(query_text, **custom_params)
        return jsonify({"success": True, "data": result})
    except Exception as e:
        return jsonify({"success": False, "error": str(e)}), 500
```

### 自定义客户端

```python
class CustomWolframClient(WolframAPIClient):
    def __init__(self, base_url="http://localhost:5000"):
        super().__init__(base_url)
    
    def custom_query(self, query):
        # 自定义查询逻辑
        return self.query(query, endpoint="custom")
```

## 🐛 故障排除

### 常见问题

1. **服务无法启动**
   ```bash
   # 检查端口占用
   netstat -an | grep 5000
   
   # 检查依赖
   python start_server.py --check-deps
   ```

2. **查询失败**
   ```bash
   # 检查服务状态
   curl http://localhost:5000/health
   
   # 查看错误日志
   python wolfram_api_server.py
   ```

3. **CORS错误**
   - 确认CORS配置正确
   - 检查请求头设置
   - 验证域名配置

### 调试模式

```python
# 启用详细日志
import logging
logging.basicConfig(level=logging.DEBUG)

# 查看请求详情
print(f"Request URL: {url}")
print(f"Response: {response.text}")
```

## 📈 性能优化

### 已实现优化
- 连接复用
- 错误重试
- 响应缓存
- 异步处理

### 进一步优化建议
- Redis缓存
- 负载均衡
- CDN加速
- 数据库优化

## 🔒 安全考虑

### 当前安全措施
- HTTPS请求
- 签名验证
- 输入验证
- 错误处理

### 生产环境建议
- 使用HTTPS
- 添加API密钥认证
- 实现请求频率限制
- 添加日志记录
- 配置防火墙

## 📝 更新日志

### v1.0.0 (2024-01-XX)
- ✨ 初始版本发布
- 🔧 Flask网络服务
- 📡 RESTful API接口
- 🐍 Python客户端示例
- 🌐 Web前端客户端
- 📚 完整文档
- 🚀 启动脚本

## 🤝 贡献指南

欢迎贡献代码和建议！

### 如何贡献
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

### 贡献方向
- 🐛 Bug修复
- ✨ 新功能
- 📚 文档改进
- 🎨 UI/UX优化
- ⚡ 性能优化

## 📄 许可证

本项目仅供学习和研究使用。请遵守Wolfram|Alpha的使用条款。

## 🙏 致谢

- Wolfram|Alpha - 提供强大的计算引擎
- Flask - 优秀的Python Web框架
- Tailwind CSS - 现代化的CSS框架
- MathJax - 数学公式渲染

---

**享受使用Wolfram|Alpha API网络服务！** 🚀

## 📞 支持

如有问题或建议，请：
1. 查看本文档
2. 检查API文档
3. 运行故障排除
4. 提交Issue
